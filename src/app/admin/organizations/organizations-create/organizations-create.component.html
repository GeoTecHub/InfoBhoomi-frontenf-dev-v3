<div class="header-container">
  <app-admin-header></app-admin-header>
</div>

<div class="admin-main-body">
  <!-- Sidebar -->
  <div class="side-panel-container">
    <app-admin-side-bar></app-admin-side-bar>
  </div>

  <!-- Tab Container with Card -->
  <div class="tab-container">
    <div class="card shadow-sm">
      <div class="card-body">
        <div class="card shadow-sm">
          <div class="card-header background-primary text-white d-flex align-items-center">
            <button mat-icon-button class="custom-back-button" (click)="goBack()">
              <mat-icon>arrow_back</mat-icon></button
            >&nbsp;&nbsp; &nbsp;
            <h6 class="mb-0 main-title">Create Organization</h6>
          </div>

          <div class="card">
            <div class="card-body">
              <form [formGroup]="organizationForm" class="w-100 px-4">
                <div class="row">
                  <div class="form-group mb-3 col-md-6">
                    <label for="display_name">Organization Name</label>
                    <input
                      type="text"
                      class="form-control form-control-sm"
                      id="display_name"
                      placeholder="Enter Name"
                      formControlName="display_name"
                      required
                    />
                  </div>

                  <div class="form-group mb-3 col-md-3">
                    <label for="permit_start_date">Permit Start</label>
                    <input
                      type="date"
                      class="form-control form-control-sm"
                      id="permit_start_date"
                      placeholder="Enter Start Date"
                      formControlName="permit_start_date"
                    />
                  </div>

                  <div class="form-group mb-3 col-md-3">
                    <label for="permit_end_date">Permit End</label>
                    <input
                      type="date"
                      class="form-control form-control-sm"
                      id="permit_end_date"
                      placeholder="Enter nName"
                      formControlName="permit_end_date"
                    />
                  </div>

                  <div class="form-group mb-3 col-md-6">
                    <label for="name">Director</label>
                    <input
                      type="text"
                      class="form-control form-control-sm"
                      id="director"
                      placeholder="Enter Director Name"
                      formControlName="director"
                    />
                  </div>

                  <div class="form-group mb-3 col-md-3">
                    <label for="contact_no">Contact Number</label>
                    <input
                      type="text"
                      class="form-control form-control-sm"
                      id="contact_no"
                      placeholder="Enter Contect Number"
                      formControlName="contact_no"
                    />
                  </div>

                  <div class="form-group mb-3 col-md-3">
                    <label for="org_email">Email</label>
                    <input
                      type="email"
                      class="form-control form-control-sm"
                      id="org_email"
                      placeholder="Enter Email"
                      formControlName="org_email"
                      (input)="formatEmail()"
                    />
                    <div
                      *ngIf="
                        organizationForm.get('org_email')?.invalid &&
                        organizationForm.get('org_email')?.touched
                      "
                      class="text-danger"
                    >
                      <small *ngIf="organizationForm.get('org_email')?.errors?.['email']">
                        Incorrect email format.
                      </small>
                    </div>
                  </div>

                  <div class="form-group mb-3 col-md-6">
                    <label for="org_address">Address</label>
                    <input
                      type="text"
                      class="form-control form-control-sm"
                      id="org_address"
                      placeholder="Enter Address"
                      formControlName="org_address"
                    />
                  </div>

                  <div class="form-group mb-3 col-md-3">
                    <label for="subscription_plan">Subscription Plan</label>
                    <select
                      class="form-control form-control-sm"
                      id="subscription_plan"
                      formControlName="subscription_plan"
                      required
                    >
                      <option value="" disabled selected>Select Plan</option>
                      <option *ngFor="let plan of subscriptionPlans" [value]="plan.value">
                        {{ plan.label }}
                      </option>
                    </select>
                  </div>

                  <div class="form-group mb-3 col-md-3">
                    <label for="org_address">Users Limit</label>
                    <input
                      type="number"
                      class="form-control form-control-sm"
                      id="users_limit"
                      placeholder="Enter User Limit"
                      formControlName="users_limit"
                    />
                  </div>

                  <div class="form-group d-flex justify-content-end">
                    <button
                      mat-icon-button
                      matSuffix
                      (click)="createNewOrganization()"
                      class="primary-bg-btn"
                      [disabled]="organizationForm.invalid"
                    >
                      <mat-icon>save</mat-icon> Create
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
