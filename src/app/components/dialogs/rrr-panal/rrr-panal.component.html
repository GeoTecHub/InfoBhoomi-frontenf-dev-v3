<div class="material-header">
  <div class="header-content-rrr">
    <p class="header-content-rrr-sub">Rights, Restrictions and Responsibilities</p>
    <p class="header-content-rrr-sub">(RRR)</p>
    <p class="header-content-id">Infobhoomi ID : {{ data.feature_id }}</p>
    <!-- <button class="close-btn">
      <mat-icon>close</mat-icon> 
    </button> -->
  </div>
</div>
<!-- <mat-card-title class="card-sub-title">
  Infobhoomi ID : {{data.feature_id}}
</mat-card-title> -->
<mat-dialog-content>
  <mat-tab-group>
    <mat-tab label="Rights">
      <mat-tab-group>
        <mat-tab label="View/Edit">
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Source Type</th>
                <th scope="col">Acceptance Date</th>
                <th scope="col">View</th>
                <th scope="col">Check</th>
                <th scope="col">Edit</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of existing_admin_source">
                <th>{{ item.admin_source_type }}</th>
                <td>{{ item.acceptance_date }}</td>
                <td>
                  <button
                    mat-icon-button
                    class="action-icons"
                    color="primary"
                    (click)="openPdfInNewTab(item)"
                  >
                    <mat-icon>visibility</mat-icon>
                  </button>
                </td>
                <td>
                  <input type="checkbox" class="keyValue__value keyValue_check" />
                </td>
                <td>
                  <button
                    mat-icon-button
                    class="action-icons"
                    color="accent"
                    (click)="onEdit(item)"
                  >
                    <mat-icon>edit</mat-icon>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </mat-tab>
        <mat-tab label="Add New">
          <mat-card class="custom-card custom-style-card">
            <mat-card-content>
              <div class="row justify-content-md-center">
                <div class="col col-lg-3"></div>
                <div class="col col-lg-6">
                  <div class="keyValueList">
                    <div class="keyValueWrapper">
                      <div class="keyValueWrapper__keyValue keyValueWrapper__keyValue_top">
                        <select
                          class="keyValue__value keyValue__value_top"
                          [(ngModel)]="right_edit_view.right_type"
                        >
                          <option value="" disabled selected>Select Type</option>
                          <option *ngFor="let option of right_types_array" [value]="option">
                            {{ option }}
                          </option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col col-lg-3"></div>
              </div>
            </mat-card-content>
          </mat-card>
          <mat-card class="custom-card" *ngIf="right_edit_view.right_type">
            <mat-card-content>
              <mat-card-title class="card-main-title"> Add New Right </mat-card-title>
              <div class="keyValueList">
                <!-- If Ownership card -->
                <div class="keyValueWrapper" *ngIf="right_edit_view.right_type == 'Ownership'">
                  <div class="keyValueWrapper__keyValue">
                    <div class="keyValue__key">Right Type <span class="text-danger">*</span></div>
                    <select class="keyValue__value" [(ngModel)]="ownership.ownership_type">
                      <option value="" disabled selected>Select Right Type</option>
                      <option *ngFor="let option of ownership_types_array" [value]="option.name">
                        {{ option.name }}
                      </option>
                    </select>
                  </div>
                </div>
                <div class="keyValueWrapper" *ngIf="right_edit_view.right_type">
                  <div class="keyValueWrapper__keyValue">
                    <div class="keyValue__key">Description</div>
                    <textarea
                      name=""
                      class="keyValue__value"
                      rows="4"
                      [(ngModel)]="right_edit_view.description"
                      placeholder="Enter description"
                    ></textarea>
                  </div>
                </div>
                <div class="keyValueWrapper" *ngIf="right_edit_view.right_type">
                  <div class="keyValueWrapper__keyValue">
                    <div class="keyValue__key">From <span class="text-danger">*</span></div>
                    <input type="date" class="keyValue__value" [(ngModel)]="right_edit_view.from" />
                  </div>
                </div>
                <div class="row">
                  <div class="col-3">
                    <div class="life-time-label">Life Time</div>
                  </div>
                  <div class="col-9">
                    <input
                      type="checkbox"
                      class="life-time-check"
                      (change)="toggleLifeTimeSelection()"
                      [(ngModel)]="right_edit_view.life_time"
                    />
                  </div>
                </div>
                <div class="keyValueWrapper" *ngIf="!right_edit_view.life_time">
                  <div class="keyValueWrapper__keyValue">
                    <div class="keyValue__key">To <span class="text-danger">*</span></div>
                    <input type="date" class="keyValue__value" [(ngModel)]="right_edit_view.to" />
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
          <!-- If Mortgage card -->
          <mat-card class="custom-card" *ngIf="right_edit_view.right_type == 'Mortgage'">
            <mat-card-content>
              <div class="keyValueList">
                <div class="keyValueWrapper">
                  <div class="keyValueWrapper__keyValue">
                    <div class="keyValue__key">Amount</div>
                    <input type="number" class="keyValue__value" [(ngModel)]="mortgage.amount" />
                  </div>
                </div>
                <div class="keyValueWrapper">
                  <div class="keyValueWrapper__keyValue">
                    <div class="keyValue__key">Interest</div>
                    <input type="number" class="keyValue__value" [(ngModel)]="mortgage.interest" />
                  </div>
                </div>
                <div class="keyValueWrapper">
                  <div class="keyValueWrapper__keyValue">
                    <div class="keyValue__key">Ranking</div>
                    <input type="number" class="keyValue__value" [(ngModel)]="mortgage.ranking" />
                  </div>
                </div>
                <div class="keyValueWrapper">
                  <div class="keyValueWrapper__keyValue">
                    <div class="keyValue__key">Mortgage Type</div>
                    <select class="keyValue__value" [(ngModel)]="mortgage.mortgage_type">
                      <option value="" disabled selected>Mortgage Type</option>
                      <option *ngFor="let option of mortgage_types_array" [value]="option.name">
                        {{ option.name }}
                      </option>
                    </select>
                  </div>
                </div>
                <div class="keyValueWrapper">
                  <div class="keyValueWrapper__keyValue">
                    <div class="keyValue__key">Mortgage ID</div>
                    <input type="text" class="keyValue__value" [(ngModel)]="mortgage.Mortgage_ID" />
                  </div>
                </div>
                <div class="keyValueWrapper">
                  <div class="keyValueWrapper__keyValue">
                    <div class="keyValue__key">Mortgagee</div>
                    <input type="text" class="keyValue__value" [(ngModel)]="mortgage.Mortgagee" />
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>

          <mat-card class="custom-card" *ngIf="right_edit_view.right_type">
            <mat-card-content>
              <mat-card-title class="card-main-title">
                Add New Administrative Document
              </mat-card-title>
              <!-- <div class="custom-card"> -->
              <div class="keyValueWrapper">
                <div class="keyValueWrapper__keyValue">
                  <div class="keyValue__key">Document Type <span class="text-danger">*</span></div>
                  <select
                    class="keyValue__value"
                    [(ngModel)]="administrative_source.admin_source_type"
                    (ngModelChange)="onPartySubTypeChange($event)"
                  >
                    <option value="" disabled selected>Select Document Type</option>
                    <option *ngFor="let option of source_types_array" [value]="option.name">
                      {{ option.name }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="keyValueWrapper">
                <div class="keyValueWrapper__keyValue">
                  <div class="keyValue__key">Description</div>
                  <textarea
                    class="keyValue__value"
                    rows="4"
                    type="text"
                    class="keyValue__value"
                    [(ngModel)]="administrative_source.description"
                  ></textarea>
                </div>
              </div>
              <div class="keyValueWrapper">
                <div class="keyValueWrapper__keyValue">
                  <div class="keyValue__key">
                    Acceptance Date <span class="text-danger">*</span>
                  </div>
                  <input
                    type="date"
                    class="keyValue__value"
                    [(ngModel)]="administrative_source.acceptance_date"
                  />
                </div>
              </div>
              <div class="keyValueWrapper">
                <div class="keyValueWrapper__keyValue">
                  <div class="keyValue__key">External Archive Reference</div>
                  <input
                    type="text"
                    class="keyValue__value"
                    [(ngModel)]="administrative_source.exte_arch_ref"
                  />
                </div>
              </div>
              <div class="keyValueWrapper">
                <div class="keyValueWrapper__keyValue">
                  <div class="keyValue__key">Life Span Stamp</div>
                  <input
                    type="text"
                    class="keyValue__value"
                    [(ngModel)]="administrative_source.life_span_stamp"
                  />
                </div>
              </div>
              <div class="keyValueWrapper">
                <div class="keyValueWrapper__keyValue">
                  <div class="keyValue__key">File <span class="text-danger">*</span></div>
                  <input
                    type="file"
                    class="keyValue__value"
                    (change)="onFileSelected($event)"
                    [(ngModel)]="administrative_source.file_path"
                    accept="application/pdf"
                  />
                </div>
              </div>
              <div class="keyValueWrapper">
                <div class="keyValueWrapper__keyValue">
                  <div class="keyValue__key">
                    Reference Number <span class="text-danger">*</span>
                  </div>
                  <input
                    type="text"
                    class="keyValue__value"
                    [(ngModel)]="administrative_source.reference_no"
                  />
                </div>
              </div>
              <!-- </div> -->
            </mat-card-content>
          </mat-card>

          <!-- ADD PARTY -->
          <mat-card class="custom-card custom-style-card" *ngIf="right_edit_view.right_type">
            <mat-card class="custom-card">
              <mat-card-content *ngIf="adeded_party_cards.length > 0">
                <table class="table">
                  <thead>
                    <tr>
                      <th width="25%" style="font-size: 12px">Name</th>
                      <th width="25%" style="font-size: 12px">Type</th>
                      <th width="20%" style="text-align: center; font-size: 12px">Share (%)</th>
                      <th width="20%" style="text-align: center; font-size: 12px">DOC Owner</th>
                      <th width="10%" style="text-align: center"></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let card of adeded_party_cards; let i = index">
                      <td style="font-size: 12px">{{ card.party_name }}</td>
                      <td style="font-size: 12px">{{ card.share_type }}</td>
                      <td style="text-align: center; font-size: 12px">{{ card.share }}</td>
                      <td style="text-align: center; font-size: 12px">
                        <input
                          type="checkbox"
                          class="keyValue_value_checkbox"
                          [checked]="doc_owner_pid === card.party"
                          (change)="toggleSelection(card)"
                        />
                      </td>
                      <td style="text-align: center">
                        <i class="fa fa-trash text-danger" (click)="removeCard(i)"></i>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </mat-card-content>
            </mat-card>
            <mat-card-title class="card-main-title">
              Add Party &nbsp;<i class="fa fa-plus plus-btn" (click)="addNewPartyOneCard()"></i>
            </mat-card-title>

            <mat-card-content *ngIf="show_party_add">
              <div class="custom-card">
                <div class="row">
                  <div class="col-9">
                    <div class="keyValueWrapper">
                      <div class="keyValueWrapper__keyValue">
                        <div class="keyValue__key">Party Type</div>
                        <select
                          class="keyValue__value"
                          [(ngModel)]="add_party.party_sub_type"
                          style="margin-left: 45px; margin-top: -4px"
                          (ngModelChange)="onPartySubTypeChange($event)"
                        >
                          <option value="" disabled selected>Select Party Type</option>
                          <option
                            *ngFor="let option of party_sub_types_array"
                            [value]="option.name"
                          >
                            {{ option.name }}
                          </option>
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <button
                      class="primary-sm-btn-select-custom"
                      (click)="openPartyTypeDialog(card.party_sub_type)"
                    >
                      Select
                    </button>
                  </div>
                </div>
                <hr *ngIf="data_of_aded_party.party_name" class="divider" />
                <div class="row" *ngIf="data_of_aded_party.party_name">
                  <div class="col-3">
                    <!-- Share Type Dropdown -->
                    <div class="keyValueWrapper">
                      <div class="keyValueWrapper__keyValue">
                        <div class="keyValue__key" style="color: #47a70d">
                          {{ data_of_aded_party.party_name }}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-6">
                    <!-- Share Type Dropdown -->
                    <div class="keyValueWrapper">
                      <div class="keyValueWrapper__keyValue">
                        <select class="keyValue__value" [(ngModel)]="add_party.share_type">
                          <option value="" disabled selected>Select Share Type</option>
                          <option
                            *ngFor="let option of right_share_types_array"
                            [value]="option.name"
                          >
                            {{ option.name }}
                          </option>
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <!-- Share Type Dropdown -->
                    <div class="keyValueWrapper" style="margin-left: -10px">
                      <div class="keyValueWrapper__keyValue">
                        <input
                          type="number"
                          class="keyValue__value"
                          placeholder="Share (%)"
                          [(ngModel)]="add_party.share_percentage"
                        />
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row" *ngIf="data_of_aded_party.party_name">
                  <div class="col-9"></div>
                  <div class="col-3">
                    <button
                      class="primary-sm-btn-select-custom"
                      (click)="civilianShowButton(add_party.share_percentage)"
                    >
                      ADD+
                    </button>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
          <!-- **************************Administrative Source************************************* -->
          <mat-tab-group>
            <!-- <mat-tab [label]="getTabLabel()" 
           [ngClass]="existing_admin_source.length > 0 ? 'has-data' : 'no-data'">
      
            </mat-tab> -->
            <mat-tab label=""> </mat-tab>
          </mat-tab-group>
        </mat-tab>
      </mat-tab-group>
    </mat-tab>
    <mat-tab label="Restrictions">
      <p>Restrictions</p>
    </mat-tab>
    <mat-tab label="Responsibilities">
      <p>Responsibilities</p>
    </mat-tab>
  </mat-tab-group>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <!-- *ngIf="civilian_data__array.length != 0" -->
  <div class="container">
    &nbsp;

    <button mat-icon-button matSuffix (click)="closeDialog()" class="footer-btn">
      <mat-icon>close</mat-icon> Close</button
    >&nbsp;&nbsp;&nbsp;
    <button mat-icon-button matSuffix (click)="SubmitAll()" class="footer-btn">
      <mat-icon>save</mat-icon> Save
    </button>
  </div>
</mat-dialog-actions>
