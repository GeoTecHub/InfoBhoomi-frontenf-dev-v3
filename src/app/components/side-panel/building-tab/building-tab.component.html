<div class="land-tab-content">
  <div class="land-tab-title">
    Feature ID: {{ selected_feature_ID }}

    <!-- <button
      mat-icon-button
      class="info-btn"
      [matTooltip]="parcelInfoText"
      matTooltipPosition="above"
      [matTooltipShowDelay]="200"
      [matTooltipHideDelay]="100"
      matTooltipClass="info-tooltip"
      aria-label="Parcel info"
    >
      <i class="fa fa-info-circle"></i>
    </button> -->
  </div>

  <div style="display: flex; justify-content: flex-end; margin: 6px 5px 0 0">
    <button class="edit-button sm-inner-section-btn" type="button" (click)="openReportsDialog()">
      <i class="fa fa-file-pdf"></i> Reports
    </button>
  </div>

  <div class="parcel-image-container">
    <div class="parcel-image">
      <div class="hover-text">Upload New Image</div>
      <img [src]="parsal_image ? parsal_image : 'sample/s_img_1.jpg'" alt="Parcel Image" />
    </div>
    <!-- Upload Icon with Save Icon Overlay -->
    <label class="save-icon" (click)="saveImage()">
      <i class="fa fa-save"></i>
      <!-- Save icon on top -->
      <span class="upload-hover-text">Save Image</span>
    </label>

    <label *ngIf="!parsal_image" class="upload-icon">
      <input type="file" (change)="onFileSelected($event)" accept=".png,.webp,.jpg,.jpeg" hidden />
      <i class="fa fa-upload"></i>
      <span class="upload-hover-text">Click to Upload</span>
    </label>

    <label *ngIf="parsal_image" class="delete-icon" (click)="deleteImage()">
      <i class="fa-solid fa-trash"></i>
      <span class="delete-hover-text">Delete Image</span>
    </label>
  </div>

  <!-- Main Information -->
  <div class="parcel-image-container">
    <app-loader [isLoading]="is_loading_summary"></app-loader>

    <div class="keyValue__key property-title-section" *ngIf="canSummaryView(113)">
      <ng-container *ngIf="summaryPropertyType; else noPropertyType">
        {{ summaryPropertyType }} Property
      </ng-container>
      <ng-template #noPropertyType>-</ng-template>
    </div>

    <div class="keyValueWrapper">
      <div class="keyValueWrapper__keyValue d-flex align-items-center">
        <div class="keyValue__key">Owner</div>
        <div class="keyValue__value">
          <ng-container *ngIf="summaryOwner; else noOwner">
            {{ summaryOwner }}
          </ng-container>
          <ng-template #noOwner>-</ng-template>
        </div>
      </div>
    </div>

    <div class="keyValueWrapper" *ngIf="canSummaryView(111)">
      <div class="keyValueWrapper__keyValue d-flex align-items-center">
        <div class="keyValue__key">Address</div>
        <div class="keyValue__value">
          <ng-container *ngIf="summaryPostalAdLnd; else noAddress">
            {{ summaryPostalAdLnd }}
          </ng-container>
          <ng-template #noAddress>-</ng-template>
        </div>
      </div>
    </div>

    <div class="keyValueWrapper" *ngIf="canSummaryView(131)">
      <div class="keyValueWrapper__keyValue d-flex align-items-center">
        <div class="keyValue__key">Assessment No</div>
        <div class="keyValue__value">
          <ng-container>
            <span>{{ summaryAssessmentNo }}</span>
            <br *ngIf="summaryAssessmentNo" />
            <span>{{ summaryAssessmentDiv || '' }}</span>
            <span *ngIf="!summaryAssessmentNo && !summaryAssessmentDiv">-</span>
          </ng-container>
          <ng-template #noAssessment>-</ng-template>
        </div>
      </div>
    </div>
  </div>

  <div class="collapsible-container">
    <!--Ownership Section -->
    <button
      class="toggle-button"
      (click)="toggleCollapse('ownership_is_collapsed')"
      [ngClass]="{ active: !ownership_is_collapsed }"
    >
      {{ ownership_is_collapsed ? 'Ownership' : 'Ownership' }}
      <span class="arrow" [ngClass]="{ rotated: !ownership_is_collapsed }">&#9660;</span>
    </button>

    <div class="keyValueList text-center py-4" *ngIf="!ownership_is_collapsed">
      <i class="fas fa-tools fa-2x text-secondary mb-2"></i>
      <div class="fw-semibold mt-2" style="font-size: 13px">
        This Ownership section is under construction.<br />
        Please check back soon!
      </div>

      <!-- <button mat-button (click)="open3dDialog()">Open 3D</button> -->
    </div>
  </div>

  <div class="collapsible-container">
    <!-- Administrative Information Section -->
    <button
      class="toggle-button"
      (click)="toggleCollapse('administrative_is_collapsed')"
      [ngClass]="{ active: !administrative_is_collapsed }"
    >
      {{
        administrative_is_collapsed ? 'Administrative Information' : 'Administrative Information'
      }}
      <span class="arrow" [ngClass]="{ rotated: !administrative_is_collapsed }">&#9660;</span>
    </button>

    <div class="keyValueList" *ngIf="!administrative_is_collapsed">
      <app-loader [isLoading]="is_loading_toast_admin_info"></app-loader>
      <!-- <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Administrative Type</div>
          <select class="keyValue__value" [(ngModel)]="adminInfo.sl_ba_unit_type"
            [disabled]="!canEditAdmin(175) || !isAdminInfoEditMode">
            <option value="" disabled selected>Select admin type </option>
            <option *ngFor="let option of administrative_types_array" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <hr class="divider" /> -->
      <!-- <label>Core details</label> -->
      <div class="keyValueWrapper" *ngIf="canViewAdmin(101)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Administrative Type</div>
          <select
            class="keyValue__value"
            [(ngModel)]="adminInfo.administrative_type"
            [disabled]="!canEditAdmin(101) || !isAdminInfoEditMode"
          >
            <option value="" disabled selected>Select admin type</option>
            <option *ngFor="let option of administrative_types_array" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(102)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Province</div>
          <input type="text" readonly class="keyValue__value" [(ngModel)]="adminInfo.pd" />
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewAdmin(103)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">District</div>
          <input type="text" readonly class="keyValue__value" [(ngModel)]="adminInfo.dist" />
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewAdmin(104)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">DS Division</div>
          <input
            type="text"
            readonly
            class="keyValue__value"
            readonly
            [(ngModel)]="adminInfo.dsd"
          />
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewAdmin(105)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">GN Division</div>
          <select
            class="keyValue__value"
            [(ngModel)]="adminInfo.gnd_id"
            [disabled]="!isAdminInfoEditMode || !canEditAdmin(105)"
          >
            <option value="" disabled selected>Select GN Division</option>
            <option *ngFor="let option of GND_array" [value]="option.gid">
              {{ option.gnd }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(106)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Electorate</div>
          <input type="text" class="keyValue__value" readonly [(ngModel)]="adminInfo.eletorate" />
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewAdmin(107)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Local Auth</div>
          <input type="text" class="keyValue__value" readonly [(ngModel)]="adminInfo.local_auth" />
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewAdmin(108)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Assess Ward</div>
          <!-- <input type="text" class="keyValue__value" readonly placeholder="Enter assessment ward"
            [(ngModel)]="adminInfo.ass_div"> -->
          <select
            class="keyValue__value"
            [(ngModel)]="adminInfo.ass_div"
            [disabled]="!isAdminInfoEditMode || !canEditAdmin(108)"
          >
            <option value="" disabled selected>Select ward</option>
            <option *ngFor="let option of Ward_array" [value]="option.id">
              {{ option.ward_name }}
            </option>
          </select>
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewAdmin(109)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Street Name</div>
          <input
            type="text"
            class="keyValue__value"
            [readonly]="!canEditAdmin(109) || !isAdminInfoEditMode"
            placeholder="Enter street name"
            [(ngModel)]="adminInfo.access_road"
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(110)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Property Name</div>
          <input
            type="text"
            class="keyValue__value"
            placeholder="Enter building name"
            [readonly]="!canEditAdmin(110) || !isAdminInfoEditMode"
            [(ngModel)]="adminInfo.building_name"
          />
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewAdmin(111)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Postal Address of Building</div>
          <textarea
            name=""
            class="keyValue__value"
            rows="4"
            [(ngModel)]="adminInfo.postal_ad_build"
            [readonly]="!canEditAdmin(111) || !isAdminInfoEditMode"
            placeholder="Enter postal address"
          ></textarea>
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewAdmin(112)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">House Hold Number</div>
          <input
            class="keyValue__value"
            [(ngModel)]="adminInfo.house_hold_no"
            [readonly]="!canEditAdmin(112) || !isAdminInfoEditMode"
            placeholder="Enter house hold No:"
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(113)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Property Type</div>
          <select
            class="keyValue__value"
            [(ngModel)]="adminInfo.bld_property_type"
            [disabled]="!isAdminInfoEditMode || !canEditAdmin(113)"
          >
            <option value="" disabled selected>Select property type</option>
            <option value="Building Type 01">Building Type 01</option>
            <option value="Building Type 02">Building Type 02</option>
            <option value="Building Type 03">Building Type 03</option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(114)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Number of floors</div>
          <input
            class="keyValue__value"
            [(ngModel)]="adminInfo.no_floors"
            [readonly]="!canEditAdmin(114) || !isAdminInfoEditMode"
            placeholder="Enter number of floors"
          />
        </div>
      </div>

      <!-- <button class="save-button" (click)="saveData('lt_admin_info')">Save</button> -->

      <div class="d-flex gap-2 justify-content-end">
        <button
          class="edit-button sm-inner-section-btn"
          *ngIf="!isAdminInfoEditMode"
          (click)="isAdminInfoEditMode = true"
        >
          <i class="fa-solid fa-pencil"></i> Edit
        </button>

        <button
          class="edit-button-inverse sm-inner-section-btn"
          *ngIf="isAdminInfoEditMode"
          (click)="isAdminInfoEditMode = false"
        >
          <i class="fa-solid fa-pencil"></i> Cancel
        </button>

        <button
          *ngIf="isAdminInfoEditMode"
          class="save-button_ sm-inner-section-btn"
          (click)="saveData('lt_admin_info'); isAdminInfoEditMode = false"
        >
          <i class="fa fa-save"></i> Save
        </button>
      </div>
    </div>
  </div>

  <!-- **********************************Building  Overview********************************************* -->

  <div class="collapsible-container">
    <!--Land Overview Section -->
    <button
      class="toggle-button"
      (click)="toggleCollapse('land_overview_is_collapsed')"
      [ngClass]="{ active: !land_overview_is_collapsed }"
    >
      {{ land_overview_is_collapsed ? 'Building Overview' : 'Building Overview' }}
      <span class="arrow" [ngClass]="{ rotated: !land_overview_is_collapsed }">&#9660;</span>
    </button>
    <div class="keyValueList" *ngIf="!land_overview_is_collapsed">
      <app-loader [isLoading]="is_loading_toast_overview"></app-loader>
      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(115)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Dimension</div>
          <input
            type="text"
            class="keyValue__value"
            placeholder="Enter dimension"
            [(ngModel)]="landInfo.dimension_2d_3d"
            readonly
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(116)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Reference Point</div>
          <input
            type="text"
            class="keyValue__value"
            [(ngModel)]="landInfo.reference_coordinate"
            readonly
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(117)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Area (mÂ²)</div>
          <input
            type="text"
            class="keyValue__value"
            placeholder="Enter area"
            [(ngModel)]="landInfo.area"
            readonly
          />
        </div>
      </div>

      <!-- <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Height</div>
          <input type="number" class="keyValue__value" [readonly]="!canEditBuildingOverview(192)"
            [(ngModel)]="landInfo.hight" readonly>
        </div>
      </div> -->
      <!-- <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Surface Relation</div>
          <select class="keyValue__value" [(ngModel)]="landInfo.surface_relation"
            [disabled]="!canEditBuildingOverview(194) || !isOverviewInfoEditMode">
            <option value="" disabled selected> Select Sanitation Sewerage </option>
            <option *ngFor="let option of sanitation_sewerageOptions" [value]="option">
              {{ option }}
            </option>
          </select>
        </div>
      </div> -->

      <hr class="divider" />
      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(118)">
        <!-- <label class="py-2 ps-1">Building Use Category</label> -->
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Building Use Category</div>
          <select
            class="keyValue__value"
            [(ngModel)]="landInfo.ext_builduse_type"
            [disabled]="!canEditBuildingOverview(118) || !isOverviewInfoEditMode"
          >
            <option value="" disabled selected>Select Building Category</option>
            <option *ngFor="let option of building_categories_array" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(119)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Sub Category</div>
          <select
            class="keyValue__value"
            [(ngModel)]="landInfo.ext_builduse_sub_type"
            [disabled]="!canEditBuildingOverview(119) || !isOverviewInfoEditMode"
          >
            <option value="" disabled selected>Select Building Sub Category</option>
            <option *ngFor="let option of building_sub_categories_array" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(120)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Roof Type</div>
          <select
            class="keyValue__value"
            [(ngModel)]="landInfo.roof_type"
            [disabled]="!canEditBuildingOverview(120) || !isOverviewInfoEditMode"
          >
            <option value="" disabled selected>Select roof type</option>
            <option *ngFor="let option of roof_type_array" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(121)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Wall Type</div>
          <select
            class="keyValue__value"
            [(ngModel)]="landInfo.wall_type"
            [disabled]="!canEditBuildingOverview(121) || !isOverviewInfoEditMode"
          >
            <option value="" disabled>Select wall type</option>
            <option *ngFor="let option of wall_type_array" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <!-- <button class="save-button" (click)="saveData('land_overview')">Save</button> -->
      <div class="d-flex gap-2 justify-content-end">
        <button
          class="edit-button sm-inner-section-btn"
          *ngIf="!isOverviewInfoEditMode"
          (click)="isOverviewInfoEditMode = true"
        >
          <i class="fa-solid fa-pencil"></i> Edit
        </button>

        <button
          class="edit-button-inverse sm-inner-section-btn"
          *ngIf="isOverviewInfoEditMode"
          (click)="isOverviewInfoEditMode = false"
        >
          <i class="fa-solid fa-pencil"></i> Cancel
        </button>

        <button
          *ngIf="isOverviewInfoEditMode"
          class="save-button_ sm-inner-section-btn"
          (click)="saveData('land_overview'); isOverviewInfoEditMode = false"
        >
          <i class="fa fa-save"></i> Save
        </button>
      </div>
    </div>
  </div>

  <!-- **************************************Utility Network Information***************************************** -->

  <div class="collapsible-container">
    <!--Utility Information Section -->

    <button
      class="toggle-button"
      (click)="toggleCollapse('utility_information_is_collapsed')"
      [ngClass]="{ active: !utility_information_is_collapsed }"
    >
      {{
        utility_information_is_collapsed
          ? 'Utility Network Information'
          : 'Utility Network Information'
      }}
      <span class="arrow" [ngClass]="{ rotated: !utility_information_is_collapsed }">&#9660;</span>
    </button>

    <div class="keyValueList" *ngIf="!utility_information_is_collapsed">
      <app-loader [isLoading]="is_loading_toast_utility_info"></app-loader>
      <div class="keyValueWrapper" *ngIf="canViewUtility(122)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Electricity</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.elec"
            [disabled]="!canEditUtility(122) || !isUtilityInfoEditMode"
          >
            <option value="" disabled selected>Select electricity option</option>
            <option *ngFor="let option of electricityOptions" [value]="option">
              {{ option }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewUtility(123)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Telecommunication</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.tele"
            [disabled]="!canEditUtility(123) || !isUtilityInfoEditMode"
          >
            <option value="" disabled selected>Select telecommunication</option>
            <option *ngFor="let option of telecomOptions" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewUtility(124)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Internet</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.internet"
            [disabled]="!canEditUtility(124) || !isUtilityInfoEditMode"
          >
            <option value="" disabled selected>Select internet</option>
            <option *ngFor="let option of internet_types_array" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewUtility(125)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Water Drinking</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.water_drink"
            [disabled]="!canEditUtility(125) || !isUtilityInfoEditMode"
          >
            <option value="" disabled selected>Select water supply</option>
            <option *ngFor="let option of water_supplyOptions" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewUtility(126)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Water supply</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.water"
            [disabled]="!canEditUtility(126) || !isUtilityInfoEditMode"
          >
            <option value="" disabled selected>Select water supply</option>
            <option *ngFor="let option of water_supplyOptions" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewUtility(127)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Drainage</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.drainage_system"
            [disabled]="!canEditUtility(127) || !isUtilityInfoEditMode"
          >
            <option value="" disabled selected>Select drainage</option>
            <option *ngFor="let option of drainageOptions" [value]="option">
              {{ option }}
            </option>
          </select>
        </div>
      </div>

      <hr class="divider" />
      <div class="keyValueWrapper" *ngIf="canViewUtility(128)">
        <!-- <label class="py-2 ps-1">Sanitation</label> -->
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Swerage</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.sani_sewer"
            [disabled]="!canEditUtility(128) || !isUtilityInfoEditMode"
          >
            <option value="" disabled selected>Select swerage</option>
            <option *ngFor="let option of sanitation_sewerageOptions" [value]="option">
              {{ option }}
            </option>
          </select>
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewUtility(129)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Gully</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.sani_gully"
            [disabled]="!canEditUtility(129) || !isUtilityInfoEditMode"
          >
            <option value="" disabled selected>Select gully</option>
            <option *ngFor="let option of gullyOptions" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewUtility(130)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Garbage disposal</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.garbage_dispose"
            [disabled]="!canEditUtility(130) || !isUtilityInfoEditMode"
          >
            <option value="" disabled selected>Select garbage disposal</option>
            <option *ngFor="let option of garbage_supplyOptions" [value]="option">
              {{ option }}
            </option>
          </select>
        </div>
      </div>
      <!-- <hr class="divider" />
      <label class="py-2 ps-1">Fire Rescue</label>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Issued Date</div>
          <input type="date" class="keyValue__value" [(ngModel)]="lt_util_Info.issued_date"
            [readonly]="!canEditUtility(210) || !isUtilityInfoEditMode">
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Expired Date</div>
          <input type="date" class="keyValue__value" [(ngModel)]="lt_util_Info.expired_date"
            [readonly]="!canEditUtility(211) || !isUtilityInfoEditMode">
        </div>
      </div> -->
      <!-- <button class="save-button" (click)="saveData('lt_util_info')">Save</button> -->

      <div class="d-flex gap-2 justify-content-end">
        <button
          class="edit-button sm-inner-section-btn"
          *ngIf="!isUtilityInfoEditMode"
          (click)="isUtilityInfoEditMode = true"
        >
          <i class="fa-solid fa-pencil"></i> Edit
        </button>

        <button
          class="edit-button-inverse sm-inner-section-btn"
          *ngIf="isUtilityInfoEditMode"
          (click)="isUtilityInfoEditMode = false"
        >
          <i class="fa-solid fa-pencil"></i> Cancel
        </button>

        <button
          *ngIf="isUtilityInfoEditMode"
          class="save-button_ sm-inner-section-btn"
          (click)="saveData('lt_util_info'); isUtilityInfoEditMode = false"
        >
          <i class="fa fa-save"></i> Save
        </button>
      </div>
    </div>
  </div>

  <!-- **********************************Tax and Assessment********************************************* -->

  <div class="main-collapsible-container">
    <!-- Main Collapsible Container -->
    <button
      class="toggle-button"
      (click)="toggleCollapse('tax_and_assessment_is_collapsed')"
      [ngClass]="{ active: !tax_and_assessment_is_collapsed }"
    >
      Tax and Assessment
      <span class="arrow" [ngClass]="{ rotated: !tax_and_assessment_is_collapsed }">&#9660;</span>
    </button>
    <div class="main-content" *ngIf="!tax_and_assessment_is_collapsed">
      <!-- Assessment Section -->
      <div class="collapsible-container-sub">
        <button
          class="sub-toggle"
          (click)="toggleCollapse('assessment_is_collapsed')"
          [ngClass]="{ active: !assessment_is_collapsed }"
        >
          Assessment Information
          <span class="arrow" [ngClass]="{ rotated: !assessment_is_collapsed }">&#9660;</span>
        </button>
        <div class="keyValueList" *ngIf="!assessment_is_collapsed">
          <app-loader [isLoading]="is_loading_toast_tax_assessment"></app-loader>
          <div class="keyValueWrapper" ngIf="canViewTaxandAsses(131)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Assessment Number</div>
              <input
                type="text"
                class="keyValue__value"
                placeholder="Enter assessment number"
                [(ngModel)]="lt_asses_and_tax.assessment_no"
                [readonly]="!canEditTaxandAsses(131) || !isTaxAssesmentInfoEditMode"
              />
            </div>
          </div>
          <div class="keyValueWrapper" ngIf="canViewTaxandAsses(132)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Assessment Name</div>
              <input
                type="text"
                class="keyValue__value"
                placeholder="Enter assessment name"
                [readonly]="!canEditTaxandAsses(132) || !isTaxAssesmentInfoEditMode"
                [(ngModel)]="lt_asses_and_tax.property_type"
              />
            </div>
          </div>
          <div class="keyValueWrapper" ngIf="canViewTaxandAsses(133)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Annual Value (Rs)</div>
              <input
                type="number"
                class="keyValue__value"
                placeholder="Enter annual value"
                [(ngModel)]="lt_asses_and_tax.assessment_annual_value"
                [readonly]="!canEditTaxandAsses(133) || !isTaxAssesmentInfoEditMode"
                (ngModelChange)="
                  calculatePercentageValue(
                    lt_asses_and_tax.assessment_annual_value,
                    lt_asses_and_tax.assessment_percentage,
                    'asses_information'
                  )
                "
              />
            </div>
          </div>

          <div class="keyValueWrapper" ngIf="canViewTaxandAsses(134)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Percentage (%)</div>
              <input
                type="number"
                class="keyValue__value"
                [readonly]="!canEditTaxandAsses(134) || !isTaxAssesmentInfoEditMode"
                placeholder="Enter percentage"
                [(ngModel)]="lt_asses_and_tax.assessment_percentage"
                (ngModelChange)="
                  calculatePercentageValue(
                    lt_asses_and_tax.assessment_annual_value,
                    lt_asses_and_tax.assessment_percentage,
                    'asses_information'
                  )
                "
              />
            </div>
          </div>
          <div class="keyValueWrapper" ngIf="canViewTaxandAsses(135)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Anual Fee (Rs)</div>
              <input
                type="text"
                class="keyValue__value"
                readonly
                [(ngModel)]="anual_fee_of_assement"
              />
            </div>
          </div>
          <div class="keyValueWrapper" ngIf="canViewTaxandAsses(136)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Outstanding (Rs)</div>
              <input
                type="text"
                class="keyValue__value"
                readonly
                [(ngModel)]="lt_asses_and_tax.outstanding_balance"
              />
            </div>
          </div>

          <div class="keyValueWrapper" ngIf="canViewTaxandAsses(137)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Date of Valuation</div>
              <input
                type="date"
                class="keyValue__value"
                [readonly]="!canEditTaxandAsses(137) || !isTaxAssesmentInfoEditMode"
                placeholder="Enter date of valuation"
                [(ngModel)]="lt_asses_and_tax.date_of_valuation"
              />
            </div>
          </div>
          <div class="keyValueWrapper" ngIf="canViewTaxandAsses(138)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Year of Assessment</div>
              <input
                type="text"
                class="keyValue__value"
                [readonly]="!canEditTaxandAsses(138) || !isTaxAssesmentInfoEditMode"
                placeholder="Enter year of assessment"
                [(ngModel)]="lt_asses_and_tax.year_of_assessment"
              />
            </div>
          </div>
          <div class="keyValueWrapper" ngIf="canViewTaxandAsses(139)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Property Type</div>
              <input
                type="text"
                class="keyValue__value"
                [readonly]="!canEditTaxandAsses(139) || !isTaxAssesmentInfoEditMode"
                placeholder="Enter property type"
                [(ngModel)]="lt_asses_and_tax.property_type"
              />
            </div>
          </div>
          <!-- Save Button for Assessment & Tax Section (or you can add one for Utility as needed) -->
          <!-- <button class="save-button" (click)="saveData('lt_asses')">Save</button> -->
          <div class="d-flex gap-2 justify-content-end">
            <button
              class="edit-button sm-inner-section-btn"
              *ngIf="!isTaxAssesmentInfoEditMode"
              (click)="isTaxAssesmentInfoEditMode = true"
            >
              <i class="fa-solid fa-pencil"></i> Edit
            </button>

            <button
              class="edit-button-inverse sm-inner-section-btn"
              *ngIf="isTaxAssesmentInfoEditMode"
              (click)="isTaxAssesmentInfoEditMode = false"
            >
              <i class="fa-solid fa-pencil"></i> Cancel
            </button>

            <button
              *ngIf="isTaxAssesmentInfoEditMode"
              class="save-button_ sm-inner-section-btn"
              (click)="saveData('lt_asses'); isTaxAssesmentInfoEditMode = false"
            >
              <i class="fa fa-save"></i> Save
            </button>
          </div>
        </div>
      </div>

      <!-- Tax Informations -->
      <div class="collapsible-container-sub">
        <button
          class="sub-toggle"
          (click)="toggleCollapse('tax_information_is_collapsed')"
          [ngClass]="{ active: !tax_information_is_collapsed }"
        >
          Tax Information
          <span class="arrow" [ngClass]="{ rotated: !tax_information_is_collapsed }">&#9660;</span>
        </button>
        <div class="keyValueList" *ngIf="!tax_information_is_collapsed">
          <div class="keyValueWrapper" *ngIf="canViewTaxInformation(140)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Annual Value (Rs)</div>
              <input
                type="number"
                class="keyValue__value"
                placeholder="Enter property type"
                [(ngModel)]="lt_asses_and_tax.tax_annual_value"
                [readonly]="!canEditTaxInformation(140) || !isTaxInfoEditMode"
                (ngModelChange)="
                  calculatePercentageValue(
                    lt_asses_and_tax.tax_annual_value,
                    lt_asses_and_tax.tax_percentage,
                    'tax_information'
                  )
                "
              />
            </div>
          </div>
          <div class="keyValueWrapper" *ngIf="canViewTaxInformation(141)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Percentage (%)</div>
              <input
                type="text"
                class="keyValue__value"
                placeholder="Enter  Percentage"
                [(ngModel)]="lt_asses_and_tax.tax_percentage"
                [readonly]="!canEditTaxInformation(141) || !isTaxInfoEditMode"
                (ngModelChange)="
                  calculatePercentageValue(
                    lt_asses_and_tax.tax_annual_value,
                    lt_asses_and_tax.tax_percentage,
                    'tax_information'
                  )
                "
              />
            </div>
          </div>
          <div class="keyValueWrapper" *ngIf="canViewTaxInformation(142)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Annual Fee (Rs)</div>
              <input
                type="text"
                class="keyValue__value"
                readonly
                placeholder="Enter tax type"
                [(ngModel)]="anual_fee_of_tax"
              />
            </div>
          </div>
          <div class="keyValueWrapper" *ngIf="canViewTaxInformation(143)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Tax Date</div>
              <input
                type="date"
                class="keyValue__value"
                [readonly]="!canEditTaxInformation(143) || !isTaxInfoEditMode"
                placeholder="Enter property type"
                [(ngModel)]="lt_asses_and_tax.tax_date"
              />
            </div>
          </div>
          <div class="keyValueWrapper" *ngIf="canViewTaxInformation(144)">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Tax Type</div>
              <input
                type="text"
                class="keyValue__value"
                [readonly]="!canEditTaxInformation(144) || !isTaxInfoEditMode"
                placeholder="Enter tax type"
                [(ngModel)]="lt_asses_and_tax.tax_type"
              />
            </div>
          </div>

          <!-- Save Button for Assessment & Tax Section (or you can add one for Utility as needed) -->
          <!-- <button class="save-button" (click)="saveData('tax_info')">Save</button> -->

          <div class="d-flex gap-2 justify-content-end">
            <button
              class="edit-button sm-inner-section-btn"
              *ngIf="!isTaxInfoEditMode"
              (click)="isTaxInfoEditMode = true"
            >
              <i class="fa-solid fa-pencil"></i> Edit
            </button>

            <button
              class="edit-button-inverse sm-inner-section-btn"
              *ngIf="isTaxInfoEditMode"
              (click)="isTaxInfoEditMode = false"
            >
              <i class="fa-solid fa-pencil"></i> Cancel
            </button>

            <button
              *ngIf="isTaxInfoEditMode"
              class="save-button_ sm-inner-section-btn"
              (click)="saveData('tax_info'); isTaxInfoEditMode = false"
            >
              <i class="fa fa-save"></i> Save
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- **********************************Building  tenure********************************************* -->
  <!-- <div class="main-collapsible-container">
    <button class="toggle-button" (click)="toggleCollapse('main_collapsedland_tenur')">
      Building Tenure
      <span class="arrow" [ngClass]="{ 'rotated': !mainCollapsedland_Tenur }">&#9660;</span>
    </button>
    <div class="main-content" *ngIf="!mainCollapsedland_Tenur">
      <div class="collapsible-container-sub">
        <button class="sub-toggle" (click)="toggleCollapse('land_tenure_is_collapsed')">
          Ownership Information
          <span class="arrow" [ngClass]="{ 'rotated': !land_tenure_is_collapsed }">&#9660;</span>
        </button>
        <div class="keyValueList" *ngIf="!land_tenure_is_collapsed">
          <app-loader [isLoading]="is_loading_toast"></app-loader>
          <div class="keyValueWrapper">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Right Type</div>
              <input type="text" class="keyValue__value" readonly [(ngModel)]="land_tenure.right_type">
            </div>
          </div>
          <div class="keyValueWrapper">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Duration</div>
              <input type="text" class="keyValue__value" readonly [(ngModel)]="land_tenure.time_spec">
            </div>
          </div>
          <div class="keyValueWrapper">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Share</div>
              <input type="text" class="keyValue__value" readonly [(ngModel)]="land_tenure.share">
            </div>
          </div>
          <hr class="divider" />
          <label>Party </label>
          <div class="keyValueWrapper">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key"> Type</div>
              <input type="text" class="keyValue__value" readonly [(ngModel)]="land_tenure.la_party_type">
            </div>
          </div>
          <div class="keyValueWrapper">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Role</div>
              <input type="text" class="keyValue__value" readonly [(ngModel)]="land_tenure.sl_party_type">
            </div>
          </div>
          <div class="keyValueWrapper">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Name</div>
              <input type="text" class="keyValue__value" readonly [(ngModel)]="land_tenure.party_name">
            </div>
          </div>
          <div class="keyValueWrapper">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Registration</div>
              <input type="text" class="keyValue__value" readonly [(ngModel)]="land_tenure.ext_pid_type">
            </div>
          </div>
          <div class="keyValueWrapper">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">NIC/BR No.</div>
              <input type="number" class="keyValue__value" readonly [(ngModel)]="land_tenure.ext_pid">
            </div>
          </div>
          <div class="keyValueWrapper">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Telephone</div>
              <textarea name="" class="keyValue__value" readonly rows="4" type="number" class="keyValue__value" readonly
                [(ngModel)]="land_tenure.tp"></textarea>
            </div>
          </div>
          <div class="keyValueWrapper">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Address</div>
              <textarea name="" class="keyValue__value" rows="4" readonly type="text" class="keyValue__value" readonly
                [(ngModel)]="land_tenure.pmt_address"></textarea>
            </div>
          </div>
          <button class="rrr-button" (click)="openRRRDialog()">RRR Panel</button>
        </div>
      </div>

      <div class="collapsible-container-sub">
        <button class="sub-toggle" (click)="toggleCollapse('administrative_sources_is_collapsed')">
          Legal Document
          <span class="arrow" [ngClass]="{ 'rotated': !administrative_sources_is_collapsed }">&#9660;</span>
        </button>
        <div class="keyValueList" *ngIf="!administrative_sources_is_collapsed">
          <app-loader [isLoading]="is_loading_toast"></app-loader>
          <div class="keyValueWrapper">
            <div class="keyValueWrapper__keyValue">
              <div class="keyValue__key">Ref No</div>
              <input type="text" class="keyValue__value" [(ngModel)]="land_tenure.reference_no">
            </div>
          </div>
          <button class="rrr-button" (click)="ViewDOC()">
            <i class="fa fa-eye"></i> &nbsp;View DOC
          </button>
          <button class="rrr-button" (click)="ViewDOC()">
            <i class="fa fa-eye"></i> Spatial Surce
          </button>
        </div>
      </div>
    </div>
  </div> -->
  <!-- ********************************************************************************************************** -->
  <div class="collapsible-container">
    <!-- Residents infromation Section -->
    <button
      class="toggle-button"
      (click)="toggleCollapse('residents_infromation_is_collapsed')"
      [ngClass]="{ active: !residents_infromation_is_collapsed }"
    >
      {{ residents_infromation_is_collapsed ? 'Residents information' : 'Residents information' }}
      <span class="arrow" [ngClass]="{ rotated: !residents_infromation_is_collapsed }"
        >&#9660;</span
      >
    </button>

    <div class="keyValueList" *ngIf="!residents_infromation_is_collapsed">
      <app-loader [isLoading]="is_loading_toast_residential_information"></app-loader>
      <div class="keyValueWrapper" *ngIf="canViewResidentialPermisions(145)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Name</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [(ngModel)]="residents_infromation.name"
          />
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewResidentialPermisions(146)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Registration</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [(ngModel)]="residents_infromation.ext_pid_type"
          />
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewResidentialPermisions(147)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">NIC/BR No.</div>
          <input
            type="number"
            class="keyValue__value"
            readonly
            [(ngModel)]="residents_infromation.ext_pid"
          />
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewResidentialPermisions(148)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Telephone</div>
          <textarea
            name=""
            class="keyValue__value"
            readonly
            rows="4"
            type="number"
            class="keyValue__value"
            readonly
            [(ngModel)]="residents_infromation.tp"
          ></textarea>
        </div>
      </div>
      <div class="keyValueWrapper" *ngIf="canViewResidentialPermisions(149)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Address</div>
          <textarea
            name=""
            class="keyValue__value"
            rows="4"
            readonly
            type="text"
            class="keyValue__value"
            readonly
            [(ngModel)]="residents_infromation.pmt_address"
          ></textarea>
        </div>
      </div>
    </div>
  </div>

  <!-- <div class="main-collapsible-container buttons-in-row">
    <button class="card-bottom-buttons" (click)="saveData('administrative_sources')">INQUIRIES</button>
    <button class="card-bottom-buttons" (click)="saveData('administrative_sources')">REMINDERS</button>
    <button class="card-bottom-buttons" (click)="saveData('administrative_sources')">COMBINE</button>
  </div> -->
</div>
