<div class="land-tab-content">
  <div class="land-tab-title">Feature ID: {{ selected_feature_ID }}</div>

  <div style="display: flex; justify-content: flex-end; margin: 6px 5px 0 0">
    <button class="edit-button sm-inner-section-btn" type="button" (click)="openReportsDialog()">
      <i class="fa fa-file-pdf"></i> Reports
    </button>
  </div>

  <div class="parcel-image-container">
    <div class="parcel-image">
      <div class="hover-text">Upload New Image</div>
      <img [src]="parsal_image ? parsal_image : 'sample/s_img_1.jpg'" alt="Parcel Image" />
    </div>

    <label class="save-icon" (click)="saveImage()">
      <i class="fa fa-save"></i>
      <span class="upload-hover-text">Save Image</span>
    </label>

    <label *ngIf="!parsal_image" class="upload-icon">
      <input type="file" (change)="onFileSelected($event)" accept=".png,.webp,.jpg,.jpeg" hidden />
      <i class="fa fa-upload"></i>
      <span class="upload-hover-text">Click to Upload</span>
    </label>

    <label *ngIf="parsal_image" class="delete-icon" (click)="deleteImage()">
      <i class="fa-solid fa-trash"></i>
      <span class="delete-hover-text">Delete Image</span>
    </label>
  </div>

  <div class="parcel-image-container">
    <app-loader [isLoading]="is_loading_summary"></app-loader>

    <div class="keyValue__key property-title-section" *ngIf="canSummaryView(113)">
      <ng-container *ngIf="summaryPropertyType; else noPropertyType">
        {{ summaryPropertyType }} Property
      </ng-container>
      <ng-template #noPropertyType>-</ng-template>
    </div>

    <div class="keyValueWrapper">
      <div class="keyValueWrapper__keyValue d-flex align-items-center">
        <div class="keyValue__key">Owner</div>
        <div class="keyValue__value">
          <ng-container *ngIf="summaryOwner; else noOwner">{{ summaryOwner }}</ng-container>
          <ng-template #noOwner>-</ng-template>
        </div>
      </div>
    </div>

    <div class="keyValueWrapper" *ngIf="canSummaryView(111)">
      <div class="keyValueWrapper__keyValue d-flex align-items-center">
        <div class="keyValue__key">Address</div>
        <div class="keyValue__value">
          <ng-container *ngIf="summaryPostalAdLnd; else noAddress">{{
            summaryPostalAdLnd
          }}</ng-container>
          <ng-template #noAddress>-</ng-template>
        </div>
      </div>
    </div>

    <div class="keyValueWrapper" *ngIf="canSummaryView(131)">
      <div class="keyValueWrapper__keyValue d-flex align-items-center">
        <div class="keyValue__key">Assessment No</div>
        <div class="keyValue__value">
          <span>{{ summaryAssessmentNo || '-' }}</span>
          <br *ngIf="summaryAssessmentNo && summaryAssessmentDiv" />
          <span *ngIf="summaryAssessmentDiv">{{ summaryAssessmentDiv }}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="collapsible-container">
    <button
      class="toggle-button"
      (click)="toggleSection('summary')"
      [ngClass]="{ active: isSectionExpanded('summary') }"
    >
      Summary &amp; Administrative
      <span class="arrow" [ngClass]="{ rotated: isSectionExpanded('summary') }">&#9660;</span>
    </button>

    <div class="keyValueList" *ngIf="isSectionExpanded('summary')">
      <app-loader [isLoading]="is_loading_toast_admin_info"></app-loader>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Building ID</div>
          <input
            type="text"
            readonly
            class="keyValue__value"
            [value]="valueOrDash(selected_feature_ID)"
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(101)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Administrative Type</div>
          <select
            class="keyValue__value"
            [(ngModel)]="adminInfo.administrative_type"
            [disabled]="!canEditAdmin(101) || !isAdminInfoEditMode"
          >
            <option value="" disabled>Select admin type</option>
            <option *ngFor="let option of administrative_types_array" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(102)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Province</div>
          <input type="text" class="keyValue__value" readonly [(ngModel)]="adminInfo.pd" />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(103)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">District</div>
          <input type="text" class="keyValue__value" readonly [(ngModel)]="adminInfo.dist" />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(104)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">DS Division</div>
          <input type="text" class="keyValue__value" readonly [(ngModel)]="adminInfo.dsd" />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(105)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">GN Division</div>
          <select
            class="keyValue__value"
            [(ngModel)]="adminInfo.gnd_id"
            [disabled]="!canEditAdmin(105) || !isAdminInfoEditMode"
          >
            <option value="" disabled>Select GN Division</option>
            <option *ngFor="let option of GND_array" [value]="option.gid">{{ option.gnd }}</option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(107)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Local Authority</div>
          <input type="text" class="keyValue__value" readonly [(ngModel)]="adminInfo.local_auth" />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(108)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Assessment Ward</div>
          <select
            class="keyValue__value"
            [(ngModel)]="adminInfo.ass_div"
            [disabled]="!canEditAdmin(108) || !isAdminInfoEditMode"
          >
            <option value="" disabled>Select ward</option>
            <option *ngFor="let option of Ward_array" [value]="option.id">
              {{ option.ward_name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(109)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Street Name</div>
          <input
            type="text"
            class="keyValue__value"
            [(ngModel)]="adminInfo.access_road"
            [readonly]="!canEditAdmin(109) || !isAdminInfoEditMode"
            placeholder="Enter street name"
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(110)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Property Name</div>
          <input
            type="text"
            class="keyValue__value"
            [(ngModel)]="adminInfo.building_name"
            [readonly]="!canEditAdmin(110) || !isAdminInfoEditMode"
            placeholder="Enter property name"
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(111)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Postal Address of Building</div>
          <textarea
            class="keyValue__value"
            rows="3"
            [(ngModel)]="adminInfo.postal_ad_build"
            [readonly]="!canEditAdmin(111) || !isAdminInfoEditMode"
            placeholder="Enter postal address"
          ></textarea>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(112)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Household / Unit Count</div>
          <input
            type="text"
            class="keyValue__value"
            [(ngModel)]="adminInfo.house_hold_no"
            [readonly]="!canEditAdmin(112) || !isAdminInfoEditMode"
            placeholder="Enter unit count"
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(113)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Property Type</div>
          <select
            class="keyValue__value"
            [(ngModel)]="adminInfo.bld_property_type"
            [disabled]="!canEditAdmin(113) || !isAdminInfoEditMode"
          >
            <option value="" disabled>Select property type</option>
            <option value="Building Type 01">Building Type 01</option>
            <option value="Building Type 02">Building Type 02</option>
            <option value="Building Type 03">Building Type 03</option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewAdmin(114)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Number of Floors</div>
          <input
            type="text"
            class="keyValue__value"
            [(ngModel)]="adminInfo.no_floors"
            [readonly]="!canEditAdmin(114) || !isAdminInfoEditMode"
            placeholder="Enter number of floors"
          />
        </div>
      </div>

      <div class="d-flex gap-2 justify-content-end">
        <button
          class="edit-button sm-inner-section-btn"
          *ngIf="!isAdminInfoEditMode"
          (click)="isAdminInfoEditMode = true"
        >
          <i class="fa-solid fa-pencil"></i> Edit
        </button>

        <button
          class="edit-button-inverse sm-inner-section-btn"
          *ngIf="isAdminInfoEditMode"
          (click)="isAdminInfoEditMode = false"
        >
          <i class="fa-solid fa-pencil"></i> Cancel
        </button>

        <button
          class="save-button_ sm-inner-section-btn"
          *ngIf="isAdminInfoEditMode"
          (click)="saveData('lt_admin_info'); isAdminInfoEditMode = false"
        >
          <i class="fa fa-save"></i> Save
        </button>
      </div>
    </div>
  </div>

  <div class="collapsible-container">
    <button
      class="toggle-button"
      (click)="toggleSection('spatial')"
      [ngClass]="{ active: isSectionExpanded('spatial') }"
    >
      Spatial / Geometric (3D)
      <span class="arrow" [ngClass]="{ rotated: isSectionExpanded('spatial') }">&#9660;</span>
    </button>

    <div class="keyValueList" *ngIf="isSectionExpanded('spatial')">
      <app-loader [isLoading]="is_loading_toast_overview"></app-loader>

      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(115)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Dimension</div>
          <input
            type="text"
            readonly
            class="keyValue__value"
            [(ngModel)]="landInfo.dimension_2d_3d"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">LoD Level</div>
          <input type="text" readonly class="keyValue__value" [value]="lodLevelLabel" />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(116)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Reference Point</div>
          <input
            type="text"
            readonly
            class="keyValue__value"
            [(ngModel)]="landInfo.reference_coordinate"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">CRS</div>
          <input type="text" readonly class="keyValue__value" [value]="crsLabel" />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(117)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Area (mÂ²)</div>
          <input type="text" readonly class="keyValue__value" [(ngModel)]="landInfo.area" />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Height</div>
          <input
            type="text"
            readonly
            class="keyValue__value"
            [value]="valueOrDash(landInfo.hight)"
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(118)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Building Use Category</div>
          <select
            class="keyValue__value"
            [(ngModel)]="landInfo.ext_builduse_type"
            [disabled]="!canEditBuildingOverview(118) || !isOverviewInfoEditMode"
          >
            <option value="" disabled>Select building category</option>
            <option *ngFor="let option of building_categories_array" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(119)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Sub Category</div>
          <select
            class="keyValue__value"
            [(ngModel)]="landInfo.ext_builduse_sub_type"
            [disabled]="!canEditBuildingOverview(119) || !isOverviewInfoEditMode"
          >
            <option value="" disabled>Select building sub category</option>
            <option *ngFor="let option of building_sub_categories_array" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(120)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Roof Type</div>
          <select
            class="keyValue__value"
            [(ngModel)]="landInfo.roof_type"
            [disabled]="!canEditBuildingOverview(120) || !isOverviewInfoEditMode"
          >
            <option value="" disabled>Select roof type</option>
            <option *ngFor="let option of roof_type_array" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewBuildingOverview(121)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Wall Type</div>
          <select
            class="keyValue__value"
            [(ngModel)]="landInfo.wall_type"
            [disabled]="!canEditBuildingOverview(121) || !isOverviewInfoEditMode"
          >
            <option value="" disabled>Select wall type</option>
            <option *ngFor="let option of wall_type_array" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="d-flex gap-2 justify-content-end">
        <button
          class="edit-button sm-inner-section-btn"
          *ngIf="!isOverviewInfoEditMode"
          (click)="isOverviewInfoEditMode = true"
        >
          <i class="fa-solid fa-pencil"></i> Edit
        </button>

        <button
          class="edit-button-inverse sm-inner-section-btn"
          *ngIf="isOverviewInfoEditMode"
          (click)="isOverviewInfoEditMode = false"
        >
          <i class="fa-solid fa-pencil"></i> Cancel
        </button>

        <button
          class="save-button_ sm-inner-section-btn"
          *ngIf="isOverviewInfoEditMode"
          (click)="saveData('land_overview'); isOverviewInfoEditMode = false"
        >
          <i class="fa fa-save"></i> Save
        </button>
      </div>
    </div>
  </div>

  <div class="collapsible-container">
    <button
      class="toggle-button"
      (click)="toggleSection('utilities')"
      [ngClass]="{ active: isSectionExpanded('utilities') }"
    >
      Utility Network Information
      <span class="arrow" [ngClass]="{ rotated: isSectionExpanded('utilities') }">&#9660;</span>
    </button>

    <div class="keyValueList" *ngIf="isSectionExpanded('utilities')">
      <app-loader [isLoading]="is_loading_toast_utility_info"></app-loader>

      <div class="keyValueWrapper" *ngIf="canViewUtility(122)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Electricity</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.elec"
            [disabled]="!canEditUtility(122) || !isUtilityInfoEditMode"
          >
            <option value="" disabled>Select electricity option</option>
            <option *ngFor="let option of electricityOptions" [value]="option">{{ option }}</option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewUtility(123)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Telecommunication</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.tele"
            [disabled]="!canEditUtility(123) || !isUtilityInfoEditMode"
          >
            <option value="" disabled>Select telecommunication</option>
            <option *ngFor="let option of telecomOptions" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewUtility(124)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Internet</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.internet"
            [disabled]="!canEditUtility(124) || !isUtilityInfoEditMode"
          >
            <option value="" disabled>Select internet</option>
            <option *ngFor="let option of internet_types_array" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewUtility(125)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Water Drinking</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.water_drink"
            [disabled]="!canEditUtility(125) || !isUtilityInfoEditMode"
          >
            <option value="" disabled>Select water drinking source</option>
            <option *ngFor="let option of water_supplyOptions" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewUtility(126)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Water Supply</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.water"
            [disabled]="!canEditUtility(126) || !isUtilityInfoEditMode"
          >
            <option value="" disabled>Select water supply</option>
            <option *ngFor="let option of water_supplyOptions" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewUtility(127)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Drainage</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.drainage_system"
            [disabled]="!canEditUtility(127) || !isUtilityInfoEditMode"
          >
            <option value="" disabled>Select drainage</option>
            <option *ngFor="let option of drainageOptions" [value]="option">{{ option }}</option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewUtility(128)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Sewerage</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.sani_sewer"
            [disabled]="!canEditUtility(128) || !isUtilityInfoEditMode"
          >
            <option value="" disabled>Select sewerage</option>
            <option *ngFor="let option of sanitation_sewerageOptions" [value]="option">
              {{ option }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewUtility(129)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Gully</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.sani_gully"
            [disabled]="!canEditUtility(129) || !isUtilityInfoEditMode"
          >
            <option value="" disabled>Select gully</option>
            <option *ngFor="let option of gullyOptions" [value]="option.name">
              {{ option.name }}
            </option>
          </select>
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewUtility(130)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Garbage Disposal</div>
          <select
            class="keyValue__value"
            [(ngModel)]="lt_util_Info.garbage_dispose"
            [disabled]="!canEditUtility(130) || !isUtilityInfoEditMode"
          >
            <option value="" disabled>Select garbage disposal</option>
            <option *ngFor="let option of garbage_supplyOptions" [value]="option">
              {{ option }}
            </option>
          </select>
        </div>
      </div>

      <div class="d-flex gap-2 justify-content-end">
        <button
          class="edit-button sm-inner-section-btn"
          *ngIf="!isUtilityInfoEditMode"
          (click)="isUtilityInfoEditMode = true"
        >
          <i class="fa-solid fa-pencil"></i> Edit
        </button>

        <button
          class="edit-button-inverse sm-inner-section-btn"
          *ngIf="isUtilityInfoEditMode"
          (click)="isUtilityInfoEditMode = false"
        >
          <i class="fa-solid fa-pencil"></i> Cancel
        </button>

        <button
          class="save-button_ sm-inner-section-btn"
          *ngIf="isUtilityInfoEditMode"
          (click)="saveData('lt_util_info'); isUtilityInfoEditMode = false"
        >
          <i class="fa fa-save"></i> Save
        </button>
      </div>
    </div>
  </div>

  <div class="collapsible-container">
    <button
      class="toggle-button"
      (click)="toggleSection('rrr')"
      [ngClass]="{ active: isSectionExpanded('rrr') }"
    >
      Rights, Restrictions &amp; Responsibilities
      <span class="arrow" [ngClass]="{ rotated: isSectionExpanded('rrr') }">&#9660;</span>
    </button>

    <div class="keyValueList" *ngIf="isSectionExpanded('rrr')">
      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Right Type</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(land_tenure.right_type)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Duration</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(land_tenure.time_spec)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Share</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(land_tenure.share)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Party Name</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(residents_infromation.name || land_tenure.party_name)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Registration</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(residents_infromation.ext_pid_type || land_tenure.ext_pid_type)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">NIC/BR No.</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(residents_infromation.ext_pid || land_tenure.ext_pid)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Legal Document Ref.</div>
          <input
            type="text"
            class="keyValue__value"
            [(ngModel)]="land_tenure.reference_no"
            readonly
          />
        </div>
      </div>

      <div class="d-flex gap-2 justify-content-end">
        <button class="rrr-button" (click)="openRRRDialog()">RRR Panel</button>
        <button class="rrr-button" (click)="ViewDOC()" [disabled]="!land_tenure.file">
          <i class="fa fa-eye"></i> View DOC
        </button>
      </div>
    </div>
  </div>

  <div class="collapsible-container">
    <button
      class="toggle-button"
      (click)="toggleSection('units')"
      [ngClass]="{ active: isSectionExpanded('units') }"
    >
      Building Units / Strata
      <span class="arrow" [ngClass]="{ rotated: isSectionExpanded('units') }">&#9660;</span>
    </button>

    <div class="keyValueList" *ngIf="isSectionExpanded('units')">
      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Number of Floors</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(adminInfo.no_floors)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Unit Count</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(adminInfo.house_hold_no)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Building Use Category</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(landInfo.ext_builduse_type)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Sub Category</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(landInfo.ext_builduse_sub_type)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Assessed Value</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(lt_asses_and_tax.assessment_annual_value)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Tax Due</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(lt_asses_and_tax.outstanding_balance)"
          />
        </div>
      </div>
    </div>
  </div>

  <div class="collapsible-container">
    <button
      class="toggle-button"
      (click)="toggleSection('relationships')"
      [ngClass]="{ active: isSectionExpanded('relationships') }"
    >
      Relationships &amp; Topology
      <span class="arrow" [ngClass]="{ rotated: isSectionExpanded('relationships') }">&#9660;</span>
    </button>

    <div class="keyValueList" *ngIf="isSectionExpanded('relationships')">
      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Parcel Relation</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(land_tenure.reference_no)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Adjacent Buildings</div>
          <input type="text" class="keyValue__value" readonly value="-" />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Street Access</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(adminInfo.access_road)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">GN Division</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(adminInfo.gnd)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Local Authority</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(adminInfo.local_auth)"
          />
        </div>
      </div>
    </div>
  </div>

  <div class="collapsible-container">
    <button
      class="toggle-button"
      (click)="toggleSection('metadata')"
      [ngClass]="{ active: isSectionExpanded('metadata') }"
    >
      Metadata &amp; Quality
      <span class="arrow" [ngClass]="{ rotated: isSectionExpanded('metadata') }">&#9660;</span>
    </button>

    <div class="keyValueList" *ngIf="isSectionExpanded('metadata')">
      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Data Quality ID</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(adminInfo.ba_unit_id)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Accuracy Level</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(adminInfo.status)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Survey Method</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(landInfo.dimension_2d_3d)"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Last Updated</div>
          <input type="text" class="keyValue__value" readonly [value]="lastUpdatedLabel" />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Responsible Party</div>
          <input type="text" class="keyValue__value" readonly [value]="responsiblePartyLabel" />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Source File</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [value]="valueOrDash(land_tenure.file)"
          />
        </div>
      </div>
    </div>
  </div>

  <div class="collapsible-container">
    <button
      class="toggle-button"
      (click)="toggleSection('valuation')"
      [ngClass]="{ active: isSectionExpanded('valuation') }"
    >
      Tax &amp; Valuation
      <span class="arrow" [ngClass]="{ rotated: isSectionExpanded('valuation') }">&#9660;</span>
    </button>

    <div class="keyValueList" *ngIf="isSectionExpanded('valuation')">
      <app-loader [isLoading]="is_loading_toast_tax_assessment"></app-loader>

      <div class="keyValueWrapper" *ngIf="canViewTaxandAsses(131)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Assessment Number</div>
          <input
            type="text"
            class="keyValue__value"
            [(ngModel)]="lt_asses_and_tax.assessment_no"
            [readonly]="!canEditTaxandAsses(131) || !isValuationEditMode"
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewTaxandAsses(132)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Assessment Name</div>
          <input
            type="text"
            class="keyValue__value"
            [(ngModel)]="lt_asses_and_tax.property_type"
            [readonly]="!canEditTaxandAsses(132) || !isValuationEditMode"
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewTaxandAsses(133)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Assessed Value (Rs)</div>
          <input
            type="number"
            class="keyValue__value"
            [(ngModel)]="lt_asses_and_tax.assessment_annual_value"
            [readonly]="!canEditTaxandAsses(133) || !isValuationEditMode"
            (ngModelChange)="
              calculatePercentageValue(
                lt_asses_and_tax.assessment_annual_value,
                lt_asses_and_tax.assessment_percentage,
                'asses_information'
              )
            "
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewTaxandAsses(134)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Assessment Percentage (%)</div>
          <input
            type="number"
            class="keyValue__value"
            [(ngModel)]="lt_asses_and_tax.assessment_percentage"
            [readonly]="!canEditTaxandAsses(134) || !isValuationEditMode"
            (ngModelChange)="
              calculatePercentageValue(
                lt_asses_and_tax.assessment_annual_value,
                lt_asses_and_tax.assessment_percentage,
                'asses_information'
              )
            "
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewTaxandAsses(135)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Assessment Annual Fee (Rs)</div>
          <input type="text" class="keyValue__value" readonly [(ngModel)]="anual_fee_of_assement" />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewTaxandAsses(136)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Outstanding Balance (Rs)</div>
          <input
            type="text"
            class="keyValue__value"
            readonly
            [(ngModel)]="lt_asses_and_tax.outstanding_balance"
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewTaxInformation(140)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Tax Annual Value (Rs)</div>
          <input
            type="number"
            class="keyValue__value"
            [(ngModel)]="lt_asses_and_tax.tax_annual_value"
            [readonly]="!canEditTaxInformation(140) || !isValuationEditMode"
            (ngModelChange)="
              calculatePercentageValue(
                lt_asses_and_tax.tax_annual_value,
                lt_asses_and_tax.tax_percentage,
                'tax_information'
              )
            "
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewTaxInformation(141)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Tax Percentage (%)</div>
          <input
            type="number"
            class="keyValue__value"
            [(ngModel)]="lt_asses_and_tax.tax_percentage"
            [readonly]="!canEditTaxInformation(141) || !isValuationEditMode"
            (ngModelChange)="
              calculatePercentageValue(
                lt_asses_and_tax.tax_annual_value,
                lt_asses_and_tax.tax_percentage,
                'tax_information'
              )
            "
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewTaxInformation(142)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Tax Annual Fee (Rs)</div>
          <input type="text" class="keyValue__value" readonly [(ngModel)]="anual_fee_of_tax" />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewTaxInformation(143)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Tax Date</div>
          <input
            type="date"
            class="keyValue__value"
            [(ngModel)]="lt_asses_and_tax.tax_date"
            [readonly]="!canEditTaxInformation(143) || !isValuationEditMode"
          />
        </div>
      </div>

      <div class="keyValueWrapper" *ngIf="canViewTaxInformation(144)">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Tax Type</div>
          <input
            type="text"
            class="keyValue__value"
            [(ngModel)]="lt_asses_and_tax.tax_type"
            [readonly]="!canEditTaxInformation(144) || !isValuationEditMode"
          />
        </div>
      </div>

      <div class="keyValueWrapper">
        <div class="keyValueWrapper__keyValue">
          <div class="keyValue__key">Tax Status</div>
          <input type="text" class="keyValue__value" readonly [value]="taxStatusLabel" />
        </div>
      </div>

      <div class="d-flex gap-2 justify-content-end">
        <button
          class="edit-button sm-inner-section-btn"
          *ngIf="!isValuationEditMode"
          (click)="startValuationEdit()"
        >
          <i class="fa-solid fa-pencil"></i> Edit
        </button>

        <button
          class="edit-button-inverse sm-inner-section-btn"
          *ngIf="isValuationEditMode"
          (click)="cancelValuationEdit()"
        >
          <i class="fa-solid fa-pencil"></i> Cancel
        </button>

        <button
          class="save-button_ sm-inner-section-btn"
          *ngIf="isValuationEditMode"
          (click)="saveValuation()"
        >
          <i class="fa fa-save"></i> Save
        </button>
      </div>
    </div>
  </div>
</div>
